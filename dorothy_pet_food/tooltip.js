INK.Tooltip=function(a){this.$=INK.$,this.positions={remote:function(a,b){return{left:a+this.offsetX,top:b+this.offsetY}},topLeft:function(){var a=this.track===!0?this.origin:this.$activeTarget.offset();return a.left=a.left+this.offsetX,a.top=a.top-this.$el.outerHeight()+this.offsetY,a},topRight:function(){var a=this.track===!0?this.origin:this.$activeTarget.offset();return a.left=a.left+this.offsetX+this.$activeTarget.outerWidth(),a.top=a.top-this.$el.outerHeight()+this.offsetY,a},bottomLeft:function(){var a=this.track===!0?this.origin:this.$activeTarget.offset();return a.left=a.left+this.offsetX,a.top=a.top+this.offsetY+this.$activeTarget.outerHeight(),a},bottomRight:function(){var a=this.track===!0?this.origin:this.$activeTarget.offset();return a.left=a.left+this.offsetX+this.$activeTarget.outerWidth(),a.top=a.top+this.offsetY+this.$activeTarget.outerHeight(),a},belowCenter:function(a){var b=this.track===!0?this.origin:this.$activeTarget.offset();return b.left=b.left+this.$activeTarget.outerWidth()/2+this.offsetX-this.$el.outerWidth()/2,b.top=b.top+this.offsetY+this.$activeTarget.outerHeight(),b},aboveCenter:function(a){var b=this.track===!0?this.origin:this.$activeTarget.offset();return b.left=b.left+this.$activeTarget.outerWidth()/2+this.offsetX-this.$el.outerWidth()/2,b.top=b.top-this.$el.outerHeight()+this.offsetY,b}};var b={target:null,id:"ink-tooltip",className:"ink-tooltip",exitTimer:null,timer:null,$el:null,token:Math.round(Math.random()*1e5),delay:0,offsetX:0,offsetY:0,opacity:.9,getContent:this.getContent,track:!1,fade:!1,align:"topLeft",origin:{top:0,left:0},onShow:function(a){return!0},onHide:function(a){return!0},remote:!1};arguments.length>0&&(_.isFunction(a.align)==1&&(this.positions.custom=a.align,a.align="custom"),this.$.extend(b,a)),this.$.extend(this,b),this.id=this.id+="-"+this.token,this.target===null?(this.remote=!0,this.align="remote"):this.$target=this.$(this.target),this.init()},INK.Tooltip.prototype={init:function(){var a=this.$('<div style="display:none;" id="'+this.id+'" class="'+this.className+'"></div>');return this.$(document.body).append(a),this.$el=this.$("#"+this.id),this.remote===!1&&(INK.isMobile()===!0?(this.$target.on("touchstart",this.$.proxy(this.handleOver,this)),this.$target.on("touchend",this.$.proxy(this.delayedOut,this))):(this.$target.live("mouseenter",this.$.proxy(this.handleOver,this)),this.$target.live("mouseleave",this.$.proxy(this.handleOut,this))),this.track===!0&&(this.proxiedUpdateMousePosition=this.$.proxy(this.updateMousePosition,this))),this},show:function(a){if(arguments.length>0&&this.remote===!1){var b;this.content(this.getContent(a)),this.track===!0&&this.startTrackingPosition(),b=this.positions[this.align].call(this),this.position({left:b.left,top:b.top})}return this.fade===!0?this.$el.fadeIn():this.$el.show(),this.onShow.call(this,a),this},hide:function(a){return this.fade===!0?this.$el.fadeOut():this.$el.hide(),this.track===!0&&this.stopTrackingPosition(),this.onHide.call(this,a),this},handleOver:function(a){clearTimeout(this.timer),clearTimeout(this.exitTimer),this.$activeTarget=this.$(a.target),this.delay!==0?this.timer=setTimeout(this.$.proxy(this.show,this,a),this.delay):this.show(a)},handleOut:function(a){clearTimeout(this.timer),clearTimeout(this.exitTimer),this.hide(a),this.$activeTarget=null},position:function(){return arguments.length>0?(this.$el.css({left:arguments[0].left+"px",top:arguments[0].top+"px"}),this):this.$el.position()},getContent:function(a){return this.$(this.$activeTarget).data("ttc")},content:function(){return arguments.length>0?(this.$el.html(arguments[0]),this):this.$el.html()},delayedOut:function(a){clearTimeout(this.exitTimer),this.exitTimer=setTimeout(this.$.proxy(this.handleOut,this,a),this.delay)},updateMousePosition:function(a){if("pageY"in a){var b;this.origin.top=a.pageY,this.origin.left=a.pageX,b=this.positions[this.align].call(this),this.position({left:b.left,top:b.top})}},startTrackingPosition:function(){this.$("body").bind("mousemove",this.proxiedUpdateMousePosition)},stopTrackingPosition:function(){this.$("body").unbind("mousemove",this.proxiedUpdateMousePosition)}},function(){INK.JST=INK.JST||{};var a=function(a){var b=new Function("obj","var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');");return b};INK.JST.tooltip=a("")}();